module.exports=[38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},40695,a=>{"use strict";var b=a.i(87924),c=a.i(11011),d=a.i(187),e=a.i(97895);let f=(0,d.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function g({className:a,variant:d,size:g,asChild:h=!1,...i}){let j=h?c.Slot:"button";return(0,b.jsx)(j,{"data-slot":"button",className:(0,e.cn)(f({variant:d,size:g,className:a})),...i})}a.s(["Button",()=>g])},81010,a=>{"use strict";let b=(0,a.i(70106).default)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);a.s(["Home",()=>b],81010)},11989,a=>{"use strict";let b=(0,a.i(70106).default)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);a.s(["default",()=>b])},17171,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(30553),e=c.forwardRef((a,c)=>(0,b.jsx)(d.Primitive.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));e.displayName="Label";var f=a.i(97895);function g({className:a,...c}){return(0,b.jsx)(e,{"data-slot":"label",className:(0,f.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...c})}a.s(["Label",()=>g],17171)},5522,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,type:d,...e}){return(0,b.jsx)("input",{type:d,"data-slot":"input",className:(0,c.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...e})}a.s(["Input",()=>d])},36800,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(40695),e=a.i(81010),f=a.i(11989),f=f;let g=(0,a.i(70106).default)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var h=a.i(38246),i=a.i(50944),j=a.i(77687),k=a.i(17171),l=a.i(5522),m=a.i(18740);function n(){let a=(0,i.useParams)();(0,i.useRouter)();let{toast:n}=(0,j.useToast)(),o=Number.parseInt(a.unit),[p,q]=(0,c.useState)([]),[r,s]=(0,c.useState)(!0),[t,u]=(0,c.useState)(new Set),[v,w]=(0,c.useState)(0),[x,y]=(0,c.useState)(new Set),[z,A]=(0,c.useState)(10);(0,c.useEffect)(()=>{B()},[o]);let B=async()=>{try{s(!0),console.log("[v0] Loading unit:",o);let a=m.auth?.currentUser?.uid;if(!a)throw Error("לא זוהה משתמש מחובר. נא להתחבר ולנסות שוב.");let b=await fetch("/api/proxy/memorize_unit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_uid:a,file_index:o})});if(!b.ok)throw Error(`HTTP error! status: ${b.status}`);let c=await b.json();if(console.log("[v0] Loaded unit data:",c),"ok"===c.status)q(c.words);else throw Error("Failed to load unit")}catch(a){console.error("[v0] Error loading unit:",a),n({title:"שגיאה",description:"לא ניתן לטעון את היחידה",variant:"destructive"})}finally{s(!1)}},C=async(a,b)=>{try{console.log("[v0] Updating word grade:",{wordId:a,newGrade:b});let c=m.auth?.currentUser?.uid;if(!c)throw Error("לא זוהה משתמש מחובר. נא להתחבר ולנסות שוב.");let d=await fetch("/api/proxy/memorization_update_word",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_uid:c,word_id:a,new_grade:b})});if(!d.ok)throw Error(`HTTP error! status: ${d.status}`);let e=await d.json();console.log("[v0] Word grade updated:",e),"ok"===e.status&&q(c=>c.map(c=>c.id===a?{...c,knowing_grade:b}:c))}catch(a){console.error("[v0] Error updating word grade:",a),n({title:"שגיאה",description:"לא ניתן לעדכן את הציון",variant:"destructive"})}},D=a=>{y(b=>{let c=new Set(b);return c.has(a)?c.delete(a):c.add(a),c}),w(0)},E=0===x.size?p:p.filter(a=>!!(x.has("known")&&10===a.knowing_grade||x.has("partial")&&a.knowing_grade>0&&a.knowing_grade<10||x.has("unknown")&&0===a.knowing_grade||x.has("unclassified")&&-1===a.knowing_grade)),F=Math.ceil(E.length/z),G=v*z,H=Math.min(G+z,E.length),I=E.slice(G,H),J=a=>"known"===a?p.filter(a=>10===a.knowing_grade).length:"partial"===a?p.filter(a=>a.knowing_grade>0&&a.knowing_grade<10).length:"unknown"===a?p.filter(a=>0===a.knowing_grade).length:"unclassified"===a?p.filter(a=>-1===a.knowing_grade).length:0;return r?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background to-secondary",dir:"rtl",children:(0,b.jsxs)("div",{className:"text-center space-y-4",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),(0,b.jsxs)("p",{className:"text-lg text-muted-foreground",children:["טוען יחידה ",o,"..."]})]})}):(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-background to-secondary p-4",dir:"rtl",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6 animate-fade-in",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("h1",{className:"text-3xl md:text-4xl font-bold text-foreground",children:["שינון יחידה ",o]}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:['סה"כ ',p.length," מילים | מציג ",G+1,"-",H]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(h.default,{href:"/memorize",children:(0,b.jsx)(d.Button,{variant:"outline",size:"icon",className:"rounded-xl bg-transparent",children:(0,b.jsx)(f.default,{className:"h-5 w-5"})})}),(0,b.jsx)(h.default,{href:"/",children:(0,b.jsx)(d.Button,{variant:"outline",size:"icon",className:"rounded-xl bg-transparent",children:(0,b.jsx)(e.Home,{className:"h-5 w-5"})})})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4 bg-card p-4 rounded-xl border shadow-sm",children:[(0,b.jsx)(k.Label,{htmlFor:"pageSize",className:"text-sm font-medium whitespace-nowrap",children:"מילים בעמוד:"}),(0,b.jsx)(l.Input,{id:"pageSize",type:"number",min:"1",max:"100",value:z,onChange:a=>{let b;(b=Number.parseInt(a.target.value))>0&&b<=100&&(A(b),w(0))},className:"w-20 rounded-lg"}),(0,b.jsxs)("span",{className:"text-xs text-muted-foreground",children:["מסננים פעילים: ",x.size||"ללא"]})]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsxs)(d.Button,{variant:x.has("known")?"default":"outline",size:"sm",onClick:()=>D("known"),className:"rounded-lg border-4 border-green-700 ring-2 ring-green-300 text-green-700 font-semibold hover:bg-green-50 dark:hover:bg-green-950 data-[state=active]:bg-green-600 data-[state=active]:text-white data-[state=active]:border-green-800 data-[state=active]:ring-green-400","data-state":x.has("known")?"active":"inactive",children:["יודע (",J("known"),")"]}),(0,b.jsxs)(d.Button,{variant:x.has("partial")?"default":"outline",size:"sm",onClick:()=>D("partial"),className:"rounded-lg border-4 border-yellow-700 ring-2 ring-yellow-300 text-yellow-700 font-semibold hover:bg-yellow-50 dark:hover:bg-yellow-950 data-[state=active]:bg-yellow-600 data-[state=active]:text-white data-[state=active]:border-yellow-800 data-[state=active]:ring-yellow-400","data-state":x.has("partial")?"active":"inactive",children:["בערך (",J("partial"),")"]}),(0,b.jsxs)(d.Button,{variant:x.has("unknown")?"default":"outline",size:"sm",onClick:()=>D("unknown"),className:"rounded-lg border-4 border-red-700 ring-2 ring-red-300 text-red-700 font-semibold hover:bg-red-50 dark:hover:bg-red-950 data-[state=active]:bg-red-600 data-[state=active]:text-white data-[state=active]:border-red-800 data-[state=active]:ring-red-400","data-state":x.has("unknown")?"active":"inactive",children:["לא יודע (",J("unknown"),")"]}),(0,b.jsxs)(d.Button,{variant:x.has("unclassified")?"default":"outline",size:"sm",onClick:()=>D("unclassified"),className:"rounded-lg border-4 border-gray-700 ring-2 ring-gray-300 text-gray-700 font-semibold hover:bg-gray-50 dark:hover:bg-gray-950 data-[state=active]:bg-gray-600 data-[state=active]:text-white data-[state=active]:border-gray-800 data-[state=active]:ring-gray-400","data-state":x.has("unclassified")?"active":"inactive",children:["לא מסווג (",J("unclassified"),")"]}),x.size>0&&(0,b.jsx)(d.Button,{variant:"ghost",size:"sm",onClick:()=>{y(new Set),w(0)},className:"rounded-lg",children:"נקה מסננים"})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:I.map(a=>{var c;return(0,b.jsxs)("div",{className:`p-4 rounded-xl border-4 ${-1===(c=a.knowing_grade)?"border-gray-400":0===c?"border-red-500":10===c?"border-green-500":"border-yellow-500"} bg-card shadow-md transition-all duration-200 hover:shadow-lg space-y-3`,children:[(0,b.jsx)("button",{onClick:()=>{var b;return b=a.id,void u(a=>{let c=new Set(a);return c.has(b)?c.delete(b):c.add(b),c})},className:"w-full text-right",children:(0,b.jsx)("p",{className:"text-xl font-bold text-foreground hover:text-primary transition-colors",children:a.word})}),t.has(a.id)&&(0,b.jsx)("p",{className:"text-base text-foreground animate-fade-in",children:a.meaning}),(0,b.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,b.jsx)(d.Button,{size:"sm",variant:0===a.knowing_grade?"default":"outline",onClick:()=>C(a.id,0),className:"flex-1 rounded-lg bg-red-500 hover:bg-red-600 text-white border-red-500",children:"לא יודע"}),(0,b.jsx)(d.Button,{size:"sm",variant:a.knowing_grade>0&&a.knowing_grade<10?"default":"outline",onClick:()=>C(a.id,5),className:"flex-1 rounded-lg bg-yellow-500 hover:bg-yellow-600 text-white border-yellow-500",children:"בערך"}),(0,b.jsx)(d.Button,{size:"sm",variant:10===a.knowing_grade?"default":"outline",onClick:()=>C(a.id,10),className:"flex-1 rounded-lg bg-green-500 hover:bg-green-600 text-white border-green-500",children:"יודע"})]})]},a.id)})}),F>1&&(0,b.jsxs)("div",{className:"flex items-center justify-center gap-4 pt-4",children:[(0,b.jsx)(d.Button,{variant:"outline",size:"icon",onClick:()=>w(a=>Math.max(0,a-1)),disabled:0===v,className:"rounded-xl",children:(0,b.jsx)(f.default,{className:"h-5 w-5"})}),(0,b.jsxs)("span",{className:"text-sm text-muted-foreground",children:["עמוד ",v+1," מתוך ",F]}),(0,b.jsx)(d.Button,{variant:"outline",size:"icon",onClick:()=>w(a=>Math.min(F-1,a+1)),disabled:v===F-1,className:"rounded-xl",children:(0,b.jsx)(g,{className:"h-5 w-5"})})]})]})})}a.s(["default",()=>n],36800)}];

//# sourceMappingURL=_d17a3642._.js.map