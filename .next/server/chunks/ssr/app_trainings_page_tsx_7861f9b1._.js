module.exports=[14663,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(40695),e=a.i(7554),f=a.i(70121),g=a.i(50104),h=a.i(92843),i=a.i(25152),j=a.i(96743),k=a.i(22297),l=a.i(92616),m=a.i(77192),n=a.i(30553),o=a.i(86228),p=a.i(52081),q=a.i(41852),r=a.i(11011),s="Dialog",[t,u]=(0,g.createContextScope)(s),[v,w]=t(s),x=a=>{let{__scopeDialog:d,children:e,open:f,defaultOpen:g,onOpenChange:j,modal:k=!0}=a,l=c.useRef(null),m=c.useRef(null),[n=!1,o]=(0,i.useControllableState)({prop:f,defaultProp:g,onChange:j});return(0,b.jsx)(v,{scope:d,triggerRef:l,contentRef:m,contentId:(0,h.useId)(),titleId:(0,h.useId)(),descriptionId:(0,h.useId)(),open:n,onOpenChange:o,onOpenToggle:c.useCallback(()=>o(a=>!a),[o]),modal:k,children:e})};x.displayName=s;var y="DialogTrigger",z=c.forwardRef((a,c)=>{let{__scopeDialog:d,...g}=a,h=w(y,d),i=(0,f.useComposedRefs)(c,h.triggerRef);return(0,b.jsx)(n.Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":h.open,"aria-controls":h.contentId,"data-state":R(h.open),...g,ref:i,onClick:(0,e.composeEventHandlers)(a.onClick,h.onOpenToggle)})});z.displayName=y;var A="DialogPortal",[B,C]=t(A,{forceMount:void 0}),D=a=>{let{__scopeDialog:d,forceMount:e,children:f,container:g}=a,h=w(A,d);return(0,b.jsx)(B,{scope:d,forceMount:e,children:c.Children.map(f,a=>(0,b.jsx)(m.Presence,{present:e||h.open,children:(0,b.jsx)(l.Portal,{asChild:!0,container:g,children:a})}))})};D.displayName=A;var E="DialogOverlay",F=c.forwardRef((a,c)=>{let d=C(E,a.__scopeDialog),{forceMount:e=d.forceMount,...f}=a,g=w(E,a.__scopeDialog);return g.modal?(0,b.jsx)(m.Presence,{present:e||g.open,children:(0,b.jsx)(G,{...f,ref:c})}):null});F.displayName=E;var G=c.forwardRef((a,c)=>{let{__scopeDialog:d,...e}=a,f=w(E,d);return(0,b.jsx)(p.RemoveScroll,{as:r.Slot,allowPinchZoom:!0,shards:[f.contentRef],children:(0,b.jsx)(n.Primitive.div,{"data-state":R(f.open),...e,ref:c,style:{pointerEvents:"auto",...e.style}})})}),H="DialogContent",I=c.forwardRef((a,c)=>{let d=C(H,a.__scopeDialog),{forceMount:e=d.forceMount,...f}=a,g=w(H,a.__scopeDialog);return(0,b.jsx)(m.Presence,{present:e||g.open,children:g.modal?(0,b.jsx)(J,{...f,ref:c}):(0,b.jsx)(K,{...f,ref:c})})});I.displayName=H;var J=c.forwardRef((a,d)=>{let g=w(H,a.__scopeDialog),h=c.useRef(null),i=(0,f.useComposedRefs)(d,g.contentRef,h);return c.useEffect(()=>{let a=h.current;if(a)return(0,q.hideOthers)(a)},[]),(0,b.jsx)(L,{...a,ref:i,trapFocus:g.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,e.composeEventHandlers)(a.onCloseAutoFocus,a=>{a.preventDefault(),g.triggerRef.current?.focus()}),onPointerDownOutside:(0,e.composeEventHandlers)(a.onPointerDownOutside,a=>{let b=a.detail.originalEvent,c=0===b.button&&!0===b.ctrlKey;(2===b.button||c)&&a.preventDefault()}),onFocusOutside:(0,e.composeEventHandlers)(a.onFocusOutside,a=>a.preventDefault())})}),K=c.forwardRef((a,d)=>{let e=w(H,a.__scopeDialog),f=c.useRef(!1),g=c.useRef(!1);return(0,b.jsx)(L,{...a,ref:d,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:b=>{a.onCloseAutoFocus?.(b),b.defaultPrevented||(f.current||e.triggerRef.current?.focus(),b.preventDefault()),f.current=!1,g.current=!1},onInteractOutside:b=>{a.onInteractOutside?.(b),b.defaultPrevented||(f.current=!0,"pointerdown"===b.detail.originalEvent.type&&(g.current=!0));let c=b.target;e.triggerRef.current?.contains(c)&&b.preventDefault(),"focusin"===b.detail.originalEvent.type&&g.current&&b.preventDefault()}})}),L=c.forwardRef((a,d)=>{let{__scopeDialog:e,trapFocus:g,onOpenAutoFocus:h,onCloseAutoFocus:i,...l}=a,m=w(H,e),n=c.useRef(null),p=(0,f.useComposedRefs)(d,n);return(0,o.useFocusGuards)(),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(k.FocusScope,{asChild:!0,loop:!0,trapped:g,onMountAutoFocus:h,onUnmountAutoFocus:i,children:(0,b.jsx)(j.DismissableLayer,{role:"dialog",id:m.contentId,"aria-describedby":m.descriptionId,"aria-labelledby":m.titleId,"data-state":R(m.open),...l,ref:p,onDismiss:()=>m.onOpenChange(!1)})}),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(V,{titleId:m.titleId}),(0,b.jsx)(W,{contentRef:n,descriptionId:m.descriptionId})]})]})}),M="DialogTitle",N=c.forwardRef((a,c)=>{let{__scopeDialog:d,...e}=a,f=w(M,d);return(0,b.jsx)(n.Primitive.h2,{id:f.titleId,...e,ref:c})});N.displayName=M;var O="DialogDescription";c.forwardRef((a,c)=>{let{__scopeDialog:d,...e}=a,f=w(O,d);return(0,b.jsx)(n.Primitive.p,{id:f.descriptionId,...e,ref:c})}).displayName=O;var P="DialogClose",Q=c.forwardRef((a,c)=>{let{__scopeDialog:d,...f}=a,g=w(P,d);return(0,b.jsx)(n.Primitive.button,{type:"button",...f,ref:c,onClick:(0,e.composeEventHandlers)(a.onClick,()=>g.onOpenChange(!1))})});function R(a){return a?"open":"closed"}Q.displayName=P;var S="DialogTitleWarning",[T,U]=(0,g.createContext)(S,{contentName:H,titleName:M,docsSlug:"dialog"}),V=({titleId:a})=>{let b=U(S),d=`\`${b.contentName}\` requires a \`${b.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${b.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${b.docsSlug}`;return c.useEffect(()=>{a&&(document.getElementById(a)||console.error(d))},[d,a]),null},W=({contentRef:a,descriptionId:b})=>{let d=U("DialogDescriptionWarning"),e=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${d.contentName}}.`;return c.useEffect(()=>{let c=a.current?.getAttribute("aria-describedby");b&&c&&(document.getElementById(b)||console.warn(e))},[e,a,b]),null},X=a.i(62213),X=X,Y=a.i(97895);function Z({...a}){return(0,b.jsx)(x,{"data-slot":"dialog",...a})}function $({...a}){return(0,b.jsx)(z,{"data-slot":"dialog-trigger",...a})}function _({...a}){return(0,b.jsx)(D,{"data-slot":"dialog-portal",...a})}function aa({className:a,...c}){return(0,b.jsx)(F,{"data-slot":"dialog-overlay",className:(0,Y.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...c})}function ab({className:a,children:c,showCloseButton:d=!0,...e}){return(0,b.jsxs)(_,{"data-slot":"dialog-portal",children:[(0,b.jsx)(aa,{}),(0,b.jsxs)(I,{"data-slot":"dialog-content",className:(0,Y.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...e,children:[c,d&&(0,b.jsxs)(Q,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,b.jsx)(X.default,{}),(0,b.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function ac({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"dialog-header",className:(0,Y.cn)("flex flex-col gap-2 text-center sm:text-left",a),...c})}function ad({className:a,...c}){return(0,b.jsx)(N,{"data-slot":"dialog-title",className:(0,Y.cn)("text-lg leading-none font-semibold",a),...c})}var ae=a.i(5522),af=a.i(17171),ag=a.i(3130),ah=a.i(77687),ai=a.i(18740),aj=a.i(15618),ak=a.i(25015),al=a.i(96221),am=a.i(50944);let an=process.env.NEXT_PUBLIC_BACKEND_URL||"https://word-psicho-server.onrender.com";function ao(){let[a,e]=(0,c.useState)([]),[f,g]=(0,c.useState)(!1),[h,i]=(0,c.useState)(!1),[j,k]=(0,c.useState)(null),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)([]),{toast:p}=(0,ah.useToast)(),q=(0,am.useRouter)();(0,c.useEffect)(()=>{r()},[]);let r=async()=>{try{console.log("[v0] Fetching trainings from proxy API");let a=ai.auth?.currentUser?.uid;if(!a)return void console.error("[v0] Cannot load trainings: no authenticated user");let b=await fetch(`/api/proxy/list_trainings?user_uid=${encodeURIComponent(a)}`,{method:"GET",headers:{"Content-Type":"application/json"}});console.log("[v0] Response status:",b.status);let c=await b.json();if(console.log("[v0] Response data:",c),!b.ok)return void console.error("Failed to load trainings:",c.error);if(c.trainings&&c.trainings.length>0){let a=c.trainings.map(a=>({name:a.name,fileIndexes:[],createdAt:a.last_modified?new Date(1e3*a.last_modified).toISOString():new Date().toISOString(),wordCount:a.word_count,lastModified:a.last_modified}));e(a)}}catch(a){console.error("Error loading trainings:",a)}},s=async()=>{if(!l.trim())return void p({title:"שגיאה",description:"נא להזין שם לאימון",variant:"destructive"});if(0===n.length)return void p({title:"שגיאה",description:"נא לבחור לפחות יחידה אחת",variant:"destructive"});i(!0);try{let b=ai.auth?.currentUser?.uid;if(!b)throw Error("לא זוהה משתמש מחובר. נא להתחבר ולנסות שוב.");let c=await fetch("/api/proxy/create_training",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_uid:b,training_name:l,file_indexes:n})}),d=await c.json();if(!c.ok)throw Error(d.error||"Failed to create training");let f={name:l,fileIndexes:n,createdAt:new Date().toISOString(),numUniqueWords:d.num_unique_words,totalItems:d.total_items_in_sequence,wordCount:d.word_count,lastModified:d.last_modified};e([f,...a]),g(!1),m(""),o([]),p({title:"✓ האימון נוצר בהצלחה",description:`${d.num_unique_words} מילים ייחודיות, ${d.total_items_in_sequence} פריטים לתרגול`,className:"bg-success text-success-foreground"}),setTimeout(()=>{confirm("האימון נוצר בהצלחה! האם ברצונך להתחיל עכשיו?")?t(l):r()},500)}catch(a){p({title:"שגיאה ביצירת אימון",description:a instanceof Error?a.message:"לא ניתן ליצור אימון כרגע",variant:"destructive"})}finally{i(!1)}},t=async a=>{k(a);try{let b=ai.auth?.currentUser?.uid;if(!b)throw Error("לא זוהה משתמש מחובר. נא להתחבר ולנסות שוב.");let c=await fetch(`${an}/load_training`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_uid:b,training_name:a})}),d=await c.json();if(!c.ok)throw Error(d.error||"Failed to load training");localStorage.setItem("currentTrainingName",a),p({title:"✓ האימון נטען בהצלחה",description:"מתחיל את האימון...",className:"bg-success text-success-foreground"}),setTimeout(()=>{q.push("/training")},500)}catch(a){p({title:"שגיאה בטעינת אימון",description:a instanceof Error?a.message:"לא ניתן לטעון את האימון",variant:"destructive"}),k(null)}};return(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-background to-secondary p-4 md:p-8",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6 animate-fade-in",children:[(0,b.jsxs)("div",{className:"text-center space-y-2 py-6",children:[(0,b.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-foreground",children:"האימונים שלי"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"צור אימון חדש או המשך אימון קיים"})]}),(0,b.jsx)(d.Button,{onClick:()=>q.push("/"),variant:"outline",className:"h-12 px-6 rounded-xl hover:scale-[1.02] active:scale-[0.98] transition-transform",children:"← חזרה למסך הראשי"}),(0,b.jsxs)(Z,{open:f,onOpenChange:g,children:[(0,b.jsx)($,{asChild:!0,children:(0,b.jsxs)(d.Button,{size:"lg",className:"w-full h-16 text-lg rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-[1.02] active:scale-[0.98] bg-primary text-primary-foreground",children:[(0,b.jsx)(aj.Plus,{className:"ml-2 h-6 w-6"}),"יצירת אימון חדש"]})}),(0,b.jsxs)(ab,{className:"sm:max-w-md animate-scale-in",dir:"rtl",children:[(0,b.jsx)(ac,{children:(0,b.jsx)(ad,{className:"text-2xl text-center",children:"אימון חדש"})}),(0,b.jsxs)("div",{className:"space-y-6 py-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(af.Label,{htmlFor:"name",className:"text-base",children:"שם האימון"}),(0,b.jsx)(ae.Input,{id:"name",placeholder:"למשל: מילים באנגלית - רמה 1",value:l,onChange:a=>m(a.target.value),className:"h-12 text-base rounded-lg",dir:"rtl"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(af.Label,{className:"text-base",children:"בחירת יחידות מקור (1-10)"}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-2 max-h-64 overflow-y-auto",children:[1,2,3,4,5,6,7,8,9,10].map(a=>(0,b.jsxs)("label",{className:"flex items-center gap-2 p-3 border rounded-lg cursor-pointer hover:bg-secondary transition-colors",children:[(0,b.jsx)("input",{type:"checkbox",checked:n.includes(a),onChange:b=>{b.target.checked?o([...n,a]):o(n.filter(b=>b!==a))},className:"w-4 h-4"}),(0,b.jsxs)("span",{className:"text-sm",children:["יחידה ",a]})]},a))})]}),(0,b.jsx)(d.Button,{onClick:s,disabled:h,className:"w-full h-12 text-base rounded-lg hover:scale-[1.02] active:scale-[0.98] transition-transform",children:h?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(al.Loader2,{className:"ml-2 h-5 w-5 animate-spin"}),"יוצר אימון..."]}):"צור אימון"})]})]})]}),a.length>0&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-foreground",children:"אימונים קודמים"}),(0,b.jsx)("div",{className:"grid gap-4",children:a.map(a=>(0,b.jsx)(ag.Card,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:(0,b.jsx)(ag.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,b.jsx)("h3",{className:"font-semibold text-lg text-foreground",children:a.name}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[a.wordCount&&`${a.wordCount} מילים`,a.lastModified&&` • ${new Date(1e3*a.lastModified).toLocaleDateString("he-IL")}`]})]}),(0,b.jsx)(d.Button,{onClick:()=>t(a.name),disabled:j===a.name,className:"h-12 px-6 rounded-lg hover:scale-[1.02] active:scale-[0.98] transition-transform",children:j===a.name?(0,b.jsx)(al.Loader2,{className:"h-5 w-5 animate-spin"}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(ak.Play,{className:"ml-2 h-5 w-5"}),"המשך"]})})]})})},a.name))})]}),0===a.length&&(0,b.jsx)(ag.Card,{className:"p-12 text-center",children:(0,b.jsx)("p",{className:"text-muted-foreground",children:"עדיין אין אימונים. צור אימון חדש כדי להתחיל!"})})]})})}a.s(["default",()=>ao],14663)}];

//# sourceMappingURL=app_trainings_page_tsx_7861f9b1._.js.map